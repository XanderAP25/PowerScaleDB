{% extends "base.html" %}

{% block content %}
<h2>{{ character.name }} ({{ character.verse_obj.name }})</h2>

<h3>Keys</h3>

<a href="{{ url_for('main.add_key', char_id=character.id) }}" class="btn">Add Key</a>

<table>
    <tr>
        <th>Key Name</th>
        <th>AP</th>
        <th>Tier</th>
        <th>Durability</th>
        <th>Speed</th>
        <th>Hax</th>
        <th>Notes</th>
        <th>Action</th>
    </tr>

    {% for k in character.keys %}
    <tr>
        <td>{{ k.key_name }}</td>
        <td>{{ k.ap }}</td>
        <td>{{ k.tier }}</td>
        <td>{{ k.durability }}</td>
        <td>{{ k.speed }}</td>
        <td>
            {% for h in k.hax %}
                {{ h.name }}{% if not loop.last %}, {% endif %}
            {% endfor %}
        </td>
        <td>{{ k.notes }}</td>
        <td>
            
            <form action="{{ url_for('main.delete_key', key_id=k.id) }}"
                method="POST"
                onsubmit="return confirm('Delete this key?');"
                style="display:inline;">
                <button class="btn" style="background:#700;">Delete</button>
            </form>

            <a class="btn" href="{{ url_for('main.edit_key', key_id=k.id) }}">Edit</a>
        </td>
        
    </tr>
    {% endfor %}
</table>


<p>
<a class="btn" href="{{ url_for('main.edit_character', char_id=character.id) }}">Edit Character</a>

<form action="{{ url_for('main.delete_character', char_id=character.id) }}"
      method="POST"
      onsubmit="return confirm('Delete this character and all its keys?');">
    <button class="btn" style="background:red;">Delete Character</button>
</form>
</p>
{% endblock %}